<div class="page-header">
  <h1>List of Receipts</h1>
</div>

<%= render partial: 'nav_tabs' %>

<%= render partial: 'filter' %>

<% if @receipts.empty? %>
  <p> - no results found - </p>
<% else %>

  <table class="table table-condensed table-striped">
    <thead>
    <tr>
      <th></th>
      <th>
        <%= link_to 'Number', '#',
                    'data-field' => 'number',
                    class: "sort-link #{sort_class('number')}" %>
      </th>
      <th>
        <%= link_to 'Car number', '#',
                    'data-field' => 'car_number',
                    class: "sort-link #{sort_class('car_number')}" %>
      </th>
      <th>
        <%= link_to 'Semitrailer number', '#',
                    'data-field' => 'semitrailer_number',
                    class: "sort-link #{sort_class('semitrailer_number')}" %>
      </th>
      <th>
        <%= link_to 'Driver', '#',
                    'data-field' => 'driver_id',
                    class: "sort-link #{sort_class('driver_id')}" %>
      </th>
      <th>
        <%= link_to 'Product', '#',
                    'data-field' => 'product_id',
                    class: "sort-link #{sort_class('product_id')}" %>
      </th>
      <th>
        <%= link_to 'Expiration from', '#',
                    'data-field' => 'expiration_from',
                    class: "sort-link #{sort_class('expiration_from')}" %>
      </th>
      <th>
        <%= link_to 'Expiration to', '#',
                    'data-field' => 'expiration_to',
                    class: "sort-link #{sort_class('expiration_to')}" %>
      </th>
      <th>
        <%= link_to 'Editor', '#',
                    'data-field' => 'user_id',
                    class: "sort-link #{sort_class('user_id')}" %>
      </th>
      <th>
        <%= link_to 'Edited at', '#',
                    'data-field' => 'updated_at',
                    class: "sort-link #{sort_class('updated_at')}" %>
      </th>
      <th>
        <%= link_to 'Creator', '#',
                    'data-field' => 'user_id',
                    class: "sort-link #{sort_class('user_id')}" %>
      </th>
      <th>
        <%= link_to 'Created at', '#',
                    'data-field' => 'created_at',
                    class: "sort-link #{sort_class('created_at')}" %>
      </th>
      <th>Actions</th>
    </tr>
    </thead>

    <tbody>
    <% @receipts.each do |receipt| %>
      <tr>
        <td><%= check_box_tag 'select', 'yes', false, class: 'list-checkbox', 'data-id' => receipt.id %></td>
        <td><%= receipt.number %></td>
        <td><%= receipt.car_number %></td>
        <td><%= receipt.semitrailer_number %></td>
        <td><%= receipt.driver.full_name %></td>
        <td><%= receipt.product.name %></td>
        <td><%= date_format(receipt.expiration_from) %></td>
        <td><%= date_format(receipt.expiration_to) %></td>
        <td><%= receipt.user.full_name %></td>
        <td><%= date_format(receipt.updated_at) %></td>
        <td><%= receipt.user.full_name %></td>
        <td><%= date_format(receipt.created_at) %></td>
        <td class="action-links">
          <%= link_to fa_icon('eye', text: 'View'), receipt, class: 'action-link' %>
          <%= link_to fa_icon('pencil', text: 'Edit'), edit_receipt_path(receipt), class: 'action-link' %>
          <%= link_to fa_icon('times', text: 'Delete'), receipt, method: :delete, data: { confirm: 'Are you sure?' }, class: 'action-link' %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>

<% end %>
